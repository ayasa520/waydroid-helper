# Waydroid Helper 按键映射指南

## 概述

Waydroid Helper 的按键映射功能允许您为在 Waydroid 中运行的 Android 应用程序创建自定义的键盘和鼠标控制。这个强大的系统使您能够将物理键盘按键和鼠标按钮映射到触摸屏交互，让移动游戏和应用在桌面系统上更易于使用。

## 快速开始

### 打开按键映射界面

1. 启动 Waydroid Helper
2. 导航到**主页**选项卡
3. 在**按键映射器**部分，点击**打开**按钮
4. 屏幕上将出现一个透明的覆盖窗口

### 界面模式

按键映射界面有两种模式：

- **编辑模式**（默认）：用于放置、配置和编辑控制组件
- **映射模式**：用于实际游戏，激活按键映射

**模式切换**：按 `F1` 键在编辑模式和映射模式之间切换。

## 可用的控制组件

### 1. 单击按钮
- **用途**：将按键/鼠标按钮映射到特定屏幕位置的单次点击
- **使用场景**：菜单按钮、简单交互
- **默认按键**：无（需要配置）
- **配置**：将组件放置在目标区域上并分配按键

### 2. 开火按钮
- **用途**：专为射击游戏设计，与瞄准组件配合使用
- **使用场景**：FPS 游戏中的武器射击
- **默认按键**：鼠标左键
- **特殊功能**：瞄准组件触发时自动激活

### 3. 方向键盘（十字键）
- **用途**：用于移动控制的虚拟摇杆
- **使用场景**：游戏中的角色移动
- **默认按键**：W（上）、A（左）、S（下）、D（右）
- **配置**：调整大小以匹配游戏的虚拟摇杆区域

### 4. 瞄准组件
- **用途**：FPS 游戏的鼠标视角/瞄准控制
- **使用场景**：相机控制和瞄准
- **默认按键**：无
- **特殊功能**：
  - 捕获鼠标移动进行精确瞄准
  - 与开火按钮配合实现完整的 FPS 控制

### 5. 连续点击
- **用途**：自动快速点击
- **使用场景**：自动攻击、连发动作
- **操作模式**：
  - **长按连击**：按住按键时持续点击
  - **按键后点击**：按键释放后固定次数点击
- **配置**：可调节点击速率和次数

### 6. 技能释放
- **用途**：带鼠标控制的高级技能瞄准
- **使用场景**：MOBA 游戏
- **功能**：
  - 鼠标引导的技能方向
  - 可配置的释放时机
  - 可选的取消按钮支持

### 7. 宏按钮
- **用途**：执行复杂的命令序列
- **使用场景**：连招、复杂交互
- **支持的命令**：
  - `key_press <按键1,按键2,...>`：按下指定按键
  - `key_release <按键1,按键2,...>`：释放指定按键
  - `key_switch <按键1,按键2,...>`：切换按键状态
  - `click <x,y>`：在坐标处点击
  - `press <x,y>`：在坐标处按下
  - `release <x,y>`：在坐标处释放
  - `switch <x,y>`：在坐标处切换（按下和释放之间切换）
  - `sleep <毫秒数>`：延迟执行
  - `release_all`：释放当前按下的所有按键
  - `enter_staring`：进入瞄准/开火模式
  - `exit_staring`：退出瞄准/开火模式
  - `swipehold_radius <系数>`：设置方向轮盘半径
  - `swipehold_radius_switch <系数>`：在原始半径和指定系数之间切换
  - `mouse`：使用当前鼠标位置作为坐标
紧急技能取消
### 8. 右键行走
- **用途**：点击移动
- **使用场景**：MOBA 游戏

### 9. 取消施法
- **用途**：中断正在进行的技能释放
- **使用场景**：MOBA 游戏



## 设置按键映射

### 添加组件

1. **进入编辑模式**（打开按键映射器时的默认模式）
2. **右键点击**空白区域打开上下文菜单
3. **选择组件类型**
4. **拖动定位**组件到所需位置
5. **调整大小**（如需要）通过选中时拖动调整手柄

### 配置按键绑定

1. **双击**任何组件进入按键捕获模式
2. **按下想要映射**到此组件的按键
3. 组件将显示分配的按键组合

#### 支持的按键类型
- **键盘按键**：字母、数字、功能键、修饰键
- **鼠标按钮**：左键、右键、中键
- **按键组合**：同时按下的多个按键（如 Ctrl+A）


### 组件特定配置

许多组件通过设置面板提供额外设置：

1. **选择组件**（编辑模式下）
2. **点击设置按钮**（齿轮图标）
3. **调整参数**，如：
   - 连续点击的点击速率
   - 技能释放的圆形半径
   - 释放时机设置
   - 操作模式

## 使用按键映射

### 激活映射

1. **按 F1 切换到映射模式**
2. **将游戏窗口**放置在透明覆盖层后面
3. **使用配置的按键**控制游戏
4. 覆盖层将显示最小的视觉指示器


## 布局管理

### 保存布局

布局自动保存到 `~/.controller_layouts/layout.json`，包括：
- 组件位置和大小
- 按键映射
- 组件特定配置
- 屏幕分辨率信息

### 加载布局

打开按键映射器时自动加载布局，支持不同屏幕分辨率的自动缩放。

## 键盘快捷键

| 按键 | 功能 |
|-----|----------|
| `F1` | 在编辑模式和映射模式之间切换 |
| `Escape` | 清除选择（编辑模式）/ 取消按键捕获 |
| `Delete` | 删除选中的组件（编辑模式） |
| `双击` | 进入组件的按键捕获模式 |

## 故障排除

### 常见问题

1. **按键无响应**：确保处于映射模式（按 F1 切换）
2. **组件不可见**：检查组件是否在屏幕边界内
3. **按键映射冲突**：每个按键组合在所有组件中应该是唯一的
4. **游戏无响应**：确保游戏窗口处于活动状态且位置正确

### 性能提示

- 游戏时使用映射模式以减少视觉开销
- 最小化活动组件数量以获得更好性能
- 精确定位组件以避免意外触发

## 高级功能

### 多区域编辑

某些组件（如方向键盘）支持多个按键映射区域：
- 双击特定区域配置不同按键
- 每个方向可以有自己的按键分配

### 宏命令

宏组件支持复杂的命令序列：
```
key_press W,A
click 100,200
key_release W,A
```

此示例按下 W 和 A 键，在坐标 (100,200) 处点击，然后释放按键。

## 最佳实践

1. **先在编辑模式测试**：切换到映射模式前验证组件放置
2. **使用直观的按键映射**：为游戏类型选择自然的按键
3. **经常保存**：布局会自动保存，但建议手动备份
4. **针对游戏风格优化**：自定义组件大小和位置以获得舒适体验
5. **从简单开始**：在使用宏等高级功能前先使用基础组件

如需更多支持或报告问题，请访问 [Waydroid Helper GitHub 仓库](https://github.com/ayasa520/waydroid-helper)。
